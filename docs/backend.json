{
  "entities": {
    "VoiceActorDemo": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VoiceActorDemo",
      "type": "object",
      "description": "Represents a voice actor's demonstration, including audio samples, images, and descriptions of their vocal styles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Voice Actor Demo."
        },
        "voiceActorId": {
          "type": "string",
          "description": "Reference to VoiceActor. (Relationship: VoiceActor 1:N VoiceActorDemo)"
        },
        "title": {
          "type": "string",
          "description": "Title of the demo."
        },
        "description": {
          "type": "string",
          "description": "Description of the demo, including vocal styles and specializations."
        },
        "audioUrl": {
          "type": "string",
          "description": "URL to the audio sample of the demo.",
          "format": "uri"
        },
        "imageUrl": {
          "type": "string",
          "description": "URL to the image associated with the demo.",
          "format": "uri"
        },
        "demoTypeId": {
          "type": "string",
          "description": "Reference to DemoType. (Relationship: DemoType 1:N VoiceActorDemo). Represents the type of demo (e.g., commercial, narrative)."
        }
      },
      "required": [
        "id",
        "voiceActorId",
        "title",
        "description",
        "audioUrl"
      ]
    },
    "VoiceActor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VoiceActor",
      "type": "object",
      "description": "Represents a voice actor profile.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Voice Actor."
        },
        "name": {
          "type": "string",
          "description": "Name of the voice actor."
        },
        "description": {
          "type": "string",
          "description": "Brief description of the voice actor."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL to the image of the voice actor.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "DemoType": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DemoType",
      "type": "object",
      "description": "Represents the type of voice acting demo (e.g., Commercial, Narrative, Character).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Demo Type."
        },
        "name": {
          "type": "string",
          "description": "Name of the demo type (e.g., Commercial, Narrative)."
        },
        "description": {
          "type": "string",
          "description": "Description of the demo type."
        }
      },
      "required": [
        "id",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/voice_actors/{voiceActorId}",
        "definition": {
          "entityName": "VoiceActor",
          "schema": {
            "$ref": "#/backend/entities/VoiceActor"
          },
          "description": "Stores voice actor profiles. Admins can create, read, update, and delete. Users can read.",
          "params": [
            {
              "name": "voiceActorId",
              "description": "The unique identifier of the voice actor."
            }
          ]
        }
      },
      {
        "path": "/demo_types/{demoTypeId}",
        "definition": {
          "entityName": "DemoType",
          "schema": {
            "$ref": "#/backend/entities/DemoType"
          },
          "description": "Stores demo types. Admins can create, read, update, and delete. Users can read.",
          "params": [
            {
              "name": "demoTypeId",
              "description": "The unique identifier of the demo type."
            }
          ]
        }
      },
      {
        "path": "/voice_actors/{voiceActorId}/demos/{demoId}",
        "definition": {
          "entityName": "VoiceActorDemo",
          "schema": {
            "$ref": "#/backend/entities/VoiceActorDemo"
          },
          "description": "Stores voice actor demos.  This subcollection is nested under the voice actor's document. Admins can create, read, update, and delete. Users can read.",
          "params": [
            {
              "name": "voiceActorId",
              "description": "The unique identifier of the voice actor."
            },
            {
              "name": "demoId",
              "description": "The unique identifier of the voice actor demo."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to allow admins to upload voice actor demos, images, and demo types.  The structure prioritizes authorization independence by avoiding hierarchical `get()` calls in security rules. It relies on path-based ownership and dedicated collections for different access requirements.\n\n*   `/voice_actors/{voiceActorId}`: Stores voice actor profiles. Only admins should be able to create, update, and delete voice actors. Users should be able to read to access the information.\n*   `/demo_types/{demoTypeId}`: Stores demo types. Only admins should be able to create, update, and delete demo types. Users should be able to read to access the information.\n*   `/voice_actors/{voiceActorId}/demos/{demoId}`: Subcollection to store voice actor demos.  This allows a 1:N relationship between voice actors and their demos.  Authorization Independence is achieved because the demos are nested under their `voiceActorId`. Admins can create, update, and delete. Users can read.\n\nThis design supports secure `list` operations (QAPs) by segregating data based on ownership and administrative roles.  All documents within a collection share the same security posture."
  }
}
